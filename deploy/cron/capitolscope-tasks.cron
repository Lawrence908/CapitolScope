# CapitolScope System Cron Jobs
# Copy to /etc/cron.d/capitolscope-tasks

SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=admin@capitolscope.chrislawrence.ca

# Health check every 5 minutes
*/5 * * * * capitolscope /opt/capitolscope/scripts/health_check.sh >> /var/log/capitolscope/health_check.log 2>&1

# Backup critical data daily at 1 AM
0 1 * * * capitolscope /opt/capitolscope/scripts/backup_data.sh >> /var/log/capitolscope/backup.log 2>&1

# Clean up old log files weekly (keep 7 days)
0 0 * * 0 capitolscope find /var/log/capitolscope -name "*.log" -mtime +7 -delete

# Check disk space every hour
0 * * * * capitolscope /opt/capitolscope/scripts/disk_space_check.sh >> /var/log/capitolscope/disk_check.log 2>&1

# Monitor Celery workers every 10 minutes
*/10 * * * * capitolscope /opt/capitolscope/scripts/celery_health_check.sh >> /var/log/capitolscope/celery_health.log 2>&1

# Database maintenance weekly (Sunday 2 AM)
0 2 * * 0 capitolscope /opt/capitolscope/scripts/database_maintenance.sh >> /var/log/capitolscope/db_maintenance.log 2>&1

# Security scan daily at 3 AM
0 3 * * * capitolscope /opt/capitolscope/scripts/security_check.sh >> /var/log/capitolscope/security_check.log 2>&1

# Application log rotation (keep 30 days)
0 4 * * * capitolscope find /var/log/capitolscope -name "*.log.*" -mtime +30 -delete



